(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.d({},{Oj:()=>L,R5:()=>k,Mw:()=>C,Y7:()=>E});var i=function(){function e(t,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_likeCard",(function(e){e.target.classList.toggle("gallery__like-button_active")})),n(this,"_deleteCard",(function(e){e.target.closest(".gallery__card").remove()})),this._title=t,this._image=i,this._templateSelector=o}var i,o;return i=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".gallery__image"),this._likeButton=this._element.querySelector(".gallery__like-button"),this._setEventListener(),this._cardImage.src=this._image,this._element.querySelector(".gallery__card-title").textContent=this._title,this._element.querySelector(".gallery__image").alt=this._title,this._element}},{key:"_setEventListener",value:function(){var e=this;this._cardImage.addEventListener("click",(function(t){e._openPopup()})),this._element.querySelector(".gallery__delete-button").addEventListener("click",this._deleteCard),this._likeButton.addEventListener("click",this._likeCard)}},{key:"_openPopup",value:function(){C(k),E.src=this._image,L.textContent=this._title,E.alt=this._title}}])&&t(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_form",void 0),r(this,"_buttonSelector",void 0),r(this,"_inputSelector",void 0),r(this,"_buttonInactive",void 0),r(this,"_inputError",void 0),r(this,"_activeError",void 0),r(this,"_validateForm",void 0),r(this,"_inputList",void 0),this._buttonSelector=t.submitButtonSelector,this._inputSelector=t.inputSelector,this._buttonInactive=t.inactiveButtonClass,this._inputError=t.inputErrorClass,this._activeError=t.errorClass,this._validateForm=n,this._inputList=Array.from(this._validateForm.querySelectorAll(this._inputSelector)),this._button=this._validateForm.querySelector(this._buttonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){e.classList.add(this._inputError),t.textContent=e.validationMessage,t.classList.add(this._activeError)}},{key:"_hideInputError",value:function(e,t){e.classList.remove(this._inputError),t.classList.remove(this._activeError),t.textContent=""}},{key:"_hasInvalidInput",value:function(e){var t=this._validateForm.querySelector(".".concat(e.id,"-error"));e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)}},{key:"_validateButtons",value:function(){this._inputList.every((function(e){return e.validity.valid}))?(this._button.classList.remove(this._buttonInactive),this._button.removeAttribute("disabled",!0)):this.buttonBlock()}},{key:"buttonBlock",value:function(){this._button.classList.add(this._buttonInactive),this._button.setAttribute("disabled",!0)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._hasInvalidInput(t),e._validateButtons()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},l=document.querySelector(".profile__current-name"),c=document.querySelector(".profile__status"),s=document.querySelector(".profile__name-edit"),p=document.getElementById("popup-edit-profile-close-button"),d=document.querySelector(".profile__add-photo-button"),_=document.getElementById("popup-add-card"),m=document.getElementById("popup-add-card-close-button"),v=document.getElementById("popup-edit-profile-form"),h=document.getElementById("popup-edit-profile"),f=document.querySelector(".popup__input_type_name"),y=document.querySelector(".popup__input_type_description"),b=document.querySelector(".gallery"),g=document.getElementById("popup-add-card-form"),k=document.getElementById("popup-open-image"),E=document.querySelector(".popup__foto"),L=document.querySelector(".popup__figcaption"),S=document.getElementById("popup-open-image-close-button"),I=new a(u,g);I.enableValidation();var B=new a(u,v);function C(e){e.classList.add("popup_opened"),e.addEventListener("click",O),document.addEventListener("keydown",j)}function q(e){e.classList.remove("popup_opened"),e.removeEventListener("click",O),document.removeEventListener("keydown",j)}function w(e,t,n){return new i(e,t,n).generateCard()}function j(e){"Escape"===e.key&&q(document.querySelector(".popup_opened"))}function O(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&q(e.currentTarget)}B.enableValidation(),document.querySelector(".template"),s.addEventListener("click",(function(){C(h),f.value=l.textContent,y.value=c.textContent,B.buttonBlock()})),p.addEventListener("click",(function(){q(h)})),v.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=f.value,c.textContent=y.value,q(h)})),d.addEventListener("click",(function(){C(_),I.buttonBlock()})),m.addEventListener("click",(function(){q(_)})),S.addEventListener("click",(function(){q(k)})),[{name:"Байкал",link:"images/baikal-min.jpg"},{name:"Архангельск",link:"images/arkhangelsk-min.jpg"},{name:"Эльбрус",link:"images/elbrus-min.jpg"},{name:"Калязинская колокольня",link:"images/kalyazin-min.jpg"},{name:"Карачаевск",link:"images/karachaevsk-min.jpg"},{name:"Карелия",link:"images/karelia-min.jpg"}].forEach((function(e){var t=w(e.name,e.link,".template");b.append(t)})),g.addEventListener("submit",(function(e){var t,n=document.getElementById("popup-add-card-title"),i=document.getElementById("popup-add-card-link");t=w(n.value,i.value,".template"),b.prepend(t),q(_),g.reset(),e.preventDefault()}))})();